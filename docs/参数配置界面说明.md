# 参数配置界面说明

## 📋 概述

参数配置界面是废弃物AI识别指导投放系统的重要组成部分，提供了图形化的方式来修改系统的各种参数设置。用户可以通过直观的界面调整摄像头、AI检测、运动检测、API、界面、音频等各个模块的参数。

## 🎯 功能特点

### 1. **分类管理**
- **标签页设计**：将参数按功能模块分类到不同标签页
- **逻辑分组**：相关参数组织在同一组内，便于理解和操作
- **直观布局**：清晰的标签和说明，降低使用门槛

### 2. **丰富的控件类型**
- **数值输入**：SpinBox、DoubleSpinBox 用于精确数值设置
- **滑块控制**：Slider 提供直观的范围调节
- **开关选项**：CheckBox 用于启用/禁用功能
- **下拉选择**：ComboBox 用于预定义选项选择
- **文本输入**：LineEdit 用于路径、URL等文本设置

### 3. **实时反馈**
- **参数验证**：输入时进行范围和格式验证
- **工具提示**：鼠标悬停显示参数说明
- **状态指示**：清晰显示当前设置状态

### 4. **配置管理**
- **导入导出**：支持配置文件的导入和导出
- **重置功能**：一键恢复默认设置
- **应用预览**：可以先应用设置查看效果

## 🏗️ 界面结构

### 标签页组织

```
参数配置界面
├── 📷 摄像头        # 摄像头相关设置
├── 🏃 运动检测      # 运动检测算法参数
├── 🌐 API         # API服务配置
├── 🔊 音频         # 语音和音频设置
├── 🔌 IO控制       # 硬件IO控制设置
├── 🎬 动画         # 动画效果设置
└── 📝 日志         # 日志系统设置
```

## 📷 摄像头配置

### 基本设置
- **设备ID**：摄像头设备编号（0-10）
- **分辨率**：图像宽度和高度设置
- **帧率(FPS)**：摄像头采集帧率（1-60）

### 高级设置
- **自动对焦**：启用/禁用自动对焦功能
- **曝光值**：手动曝光控制（-10到10，-1为自动）

### 配置建议
```json
{
  "camera": {
    "device_id": 0,           // 通常使用默认摄像头
    "resolution": {
      "width": 1280,          // 推荐1280x720或640x480
      "height": 720
    },
    "fps": 30,                // 推荐15-30FPS
    "auto_focus": true,       // 建议启用自动对焦
    "exposure": -1            // 建议使用自动曝光
  }
}
```

## 🔌 IO控制配置

### IO控制设置
- **启用IO控制**：硬件IO功能总开关
- **红外传感器引脚**：GPIO引脚号（1-40）
- **检测延迟**：传感器触发后的延迟时间（0.1-5.0秒）
- **检测超时**：单次检测的最大等待时间（5-60秒）
- **防抖时间**：防止误触发的延迟时间（0.05-1.0秒）

### 硬件连接
```
红外传感器连接：
- VCC → 3.3V (Pin 1)
- GND → GND (Pin 6)
- OUT → GPIO 18 (Pin 12)
```

## 🎬 动画配置

### 动画设置
- **启用动画**：动画效果总开关
- **粒子数量**：粒子特效的粒子数量（5-100）
- **动画持续时间**：动画播放的总时长（1000-10000毫秒）
- **成功动画持续时间**：成功状态动画时长（1000-5000毫秒）
- **脉冲动画帧率**：脉冲效果的刷新频率（10-60FPS）

### 性能影响
- 粒子数量越多，视觉效果越好，但性能消耗越大
- 动画帧率越高，效果越流畅，但CPU使用率越高
- 低配置设备建议减少粒子数量和降低帧率

## 📝 日志配置

### 日志设置
- **日志级别**：DEBUG、INFO、WARNING、ERROR、CRITICAL
- **日志文件路径**：日志文件保存位置
- **最大文件大小**：单个日志文件的最大大小
- **备份数量**：保留的历史日志文件数量（1-20）
- **控制台输出**：是否在控制台显示日志

### 日志级别说明
- **DEBUG**：详细的调试信息，用于开发调试
- **INFO**：一般信息，记录程序运行状态
- **WARNING**：警告信息，程序可以继续运行
- **ERROR**：错误信息，程序功能受影响
- **CRITICAL**：严重错误，程序可能无法继续运行

## 🏃 运动检测配置

### 基本设置
- **启用运动检测**：总开关
- **智能检测器**：使用增强算法
- **运动阈值**：检测敏感度（100-2000）
- **最小轮廓面积**：最小检测物体大小（500-10000）
- **检测冷却时间**：两次检测间隔（1-30秒）

### ROI设置
- **启用ROI**：感兴趣区域检测
- **ROI边界**：上下左右边界比例（0.0-1.0）

### 高级参数
- **稳定性阈值**：物体稳定性判断（10-200）
- **最小稳定时间**：稳定检测时间（0.5-10秒）
- **最大稳定时间**：最大等待时间（1-20秒）

### 调优建议
```json
{
  "motion_detection": {
    "motion_threshold": 800,     // 中等敏感度
    "min_contour_area": 1500,    // 过滤小物体
    "detection_cooldown": 15.0,  // 避免频繁触发
    "roi_enabled": true,         // 启用ROI提高精度
    "roi_top_ratio": 0.2,        // ROI设置
    "roi_bottom_ratio": 0.8,
    "roi_left_ratio": 0.1,
    "roi_right_ratio": 0.9
  }
}
```

## 🌐 API配置

### API设置
- **API地址**：服务器URL
- **API密钥**：访问凭证（密码显示）
- **模型名称**：使用的AI模型
- **最大重试次数**：失败重试次数（1-10）
- **超时时间**：请求超时设置（5-120秒）

### 安全注意事项
- API密钥以密码形式显示，保护敏感信息
- 支持配置导出时可选择是否包含密钥
- 建议定期更换API密钥

## 🎨 界面配置

### 窗口设置
- **窗口标题**：自定义应用标题
- **全屏模式**：启动时是否全屏
- **窗口大小**：默认窗口尺寸

### 界面设置
- **主题**：default、modern、dark、light
- **语言**：zh_CN（中文）、en_US（英文）
- **自动隐藏指导**：结果显示后自动隐藏
- **指导显示时间**：自动隐藏的延迟时间

## 🔊 音频配置

### 语音设置
- **启用语音**：语音功能总开关
- **语音语言**：zh（中文）、en（英文）
- **音量**：音量大小（0.0-1.0，支持滑块调节）
- **语音速度**：播放速度（50-300词/分钟）

### 音频优化
- 音量滑块提供直观调节
- 语音速度影响用户体验，建议150词/分钟
- 支持实时测试语音效果

## ⚡ 性能配置

### 性能设置
- **最大帧率**：系统最大处理帧率（5-60FPS）
- **处理线程数**：并行处理线程数量（1-8）
- **缓冲区大小**：图像缓冲区大小（5-50）
- **内存限制**：最大内存使用量（256-8192MB）

### 性能调优
- **低配置设备**：降低帧率、减少线程数
- **高配置设备**：提高帧率、增加线程数
- **内存限制**：根据系统内存合理设置

## 🔧 高级配置

### 日志设置
- **日志级别**：DEBUG、INFO、WARNING、ERROR、CRITICAL
- **控制台输出**：是否在控制台显示日志

### IO控制设置
- **启用IO控制**：硬件IO功能开关
- **红外传感器引脚**：GPIO引脚号（1-40）

### 动画设置
- **启用动画**：动画效果开关
- **粒子数量**：粒子特效数量（5-100）
- **动画持续时间**：动画播放时长（1000-10000毫秒）

## 💾 配置管理功能

### 导入配置
1. 点击"导入配置"按钮
2. 选择JSON格式的配置文件
3. 系统自动加载并更新界面
4. 确认后应用新配置

### 导出配置
1. 点击"导出配置"按钮
2. 选择保存位置和文件名
3. 系统导出当前所有配置
4. 可用于备份或分享配置

### 重置默认值
1. 点击"重置默认值"按钮
2. 确认重置操作
3. 所有参数恢复到默认值
4. 需要重新调整个性化设置

## 🎯 使用建议

### 首次使用
1. **摄像头设置**：确认设备ID和分辨率
2. **运动检测**：调整敏感度和ROI区域
3. **AI检测**：设置合适的置信度阈值
4. **界面设置**：选择合适的主题和语言

### 性能优化
1. **低配置设备**：
   - 降低摄像头分辨率和帧率
   - 减少处理线程数
   - 关闭不必要的动画效果

2. **高配置设备**：
   - 提高分辨率获得更好效果
   - 增加线程数提升处理速度
   - 启用GPU加速（如果支持）

### 故障排除
1. **配置不生效**：检查是否点击"应用"或"确定"
2. **参数超出范围**：注意控件的最小最大值限制
3. **导入失败**：确认JSON文件格式正确
4. **性能问题**：适当降低相关参数值

## 🔄 配置生效机制

### 立即生效的参数
- 界面主题和语言
- 音频音量和语音设置
- 动画效果开关

### 需要重启的参数
- 摄像头设备ID和分辨率
- AI模型路径
- 日志级别设置
- IO控制相关设置

### 应用流程
1. 修改参数后点击"应用"立即生效
2. 点击"确定"保存并关闭对话框
3. 点击"取消"放弃所有修改
4. 部分设置可能需要重启程序

## 📞 技术支持

如果在使用参数配置界面时遇到问题：

1. **检查日志**：查看系统日志了解错误详情
2. **重置配置**：尝试重置为默认值
3. **备份配置**：定期导出配置文件作为备份
4. **联系支持**：通过项目Issue反馈问题

---

**版本信息**：v1.0.0  
**最后更新**：2025-07-25  
**维护状态**：积极维护
